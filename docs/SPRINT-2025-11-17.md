# GPS2 Sprint - November 17, 2025

> [!CAUTION]
> **Sprint Deferred:** This sprint has been deferred pending completion of the **3D Environment System** project. Work will resume after the following 3D milestones are reached:
> - üìã Phase 1 (MVP) - Basic 3D scene with guinea pig movement
> - üìã Phase 2 - Enhanced objects and basic interactions
> - üìã Phase 3 - Full playability with minimal guinea pig care ‚≠ê **Sprint Resume Milestone**
>
> See **[docs-3d/PROJECT_PLAN.md](../docs-3d/PROJECT_PLAN.md)** for 3D project documentation and progress.

**Started:** November 17, 2025
**Status:** ‚è∏Ô∏è Deferred (3D Project Priority)
**Branch:** GPS2-50
**Previous Sprint:** [SPRINT-2025-11-11.md](archive/SPRINT-2025-11-11.md)

**Progress:**
- üìã Sprint Started
- ‚è∏Ô∏è Deferred for 3D Environment System implementation

---

## üéØ **Sprint Goals**

**Focus:** Refine and polish social interactions system

**Priority Areas:**
1. Test and refine all 9 social interactions
2. Fix interaction behavior issues (sleep positioning, follow path, redundant messages)
3. Fix bonding percentage display bug (shows 3000% at fully bonded)
4. Run code and CSS audit once interactions are finalized

---

## üìã **Sprint Backlog**

### Social Interactions Refinement
**Priority:** HIGH
**Status:** üöß In Progress
**Category:** Behavior Refinement

**Goal:** Test and polish all social interactions for production quality

**Issues to Fix:**

1. **Sleep Together Interaction**
   - Guinea pigs not moving into shelter/bed location properly
   - Appearing outside shelter with sprites overlapping (not cuddle positioning)
   - Redundant activity messages appearing

2. **Follow Interaction**
   - Guinea pigs only meet at midpoint instead of walking same path
   - Should follow leader on actual movement path for duration

3. **Bonding Display Bug**
   - Fully bonded guinea pigs show "Compatibility: 3000%" instead of 100%
   - Need to fix percentage calculation or display logic

**Files to Review:**
- [useSocialBehaviors.ts](../src/composables/game/useSocialBehaviors.ts) - Sleep and follow implementations
- [BondingSidebar.vue](../src/components/game/habitat/sidebars/BondingSidebar.vue) - Bonding percentage display
- [useGuineaPigBehavior.ts](../src/composables/game/useGuineaPigBehavior.ts) - Interaction execution

---

### Code & CSS Audit Post-Interactions
**Priority:** HIGH
**Status:** üìã Not Started
**Category:** Code Quality

**Goal:** Run comprehensive code and CSS audit after social interactions are finalized

**Audit Scope:**
- All social behavior composables
- Interaction-related components (BondingSidebar, chat bubbles)
- TypeScript strict mode compliance
- CSS standards (BEM, logical properties)
- Console.log cleanup
- Performance review

**Deliverables:**
- Code audit report with score
- CSS audit report with score
- Fix any critical/high priority issues found

---

## üêõ **Bug Fixes**

### Simultaneous Poop Bug
**Priority:** HIGH
**Status:** üìã Not Started
**Category:** Bug Fix

**Issue:** Multiple guinea pigs pooping at the exact same time (easier to track now with visible poop panel)

**Investigation Needed:**
- Review poop timing logic
- Check for race conditions in poop generation
- Verify individual guinea pig timers vs shared timers
- Add randomization to prevent simultaneous events

**Files to Check:**
- Poop generation logic (likely in guinea pig behavior or needs system)

---

### Supplies Store Responsive Layout
**Priority:** MEDIUM
**Status:** üìã Not Started
**Category:** UI Enhancement

**Goal:** Improve responsive layout for Supplies Store table view on mobile

**Issue:**
The responsive table view doesn't look good on mobile devices. The grid view looks fine, so we should either:
1. Always use grid view on mobile (simplest)
2. Redesign table view for better mobile display

**Recommendation:** Force grid view on mobile (‚â§768px) since it already looks good

**Implementation:**
- Add media query to hide table view toggle on mobile
- Force grid view layout on mobile devices
- Ensure grid view is optimized for small screens
- Test on various mobile screen sizes

**Files to Modify:**
- [SuppliesStoreDebug.vue](../src/components/debug/environment/SuppliesStoreDebug.vue) - Add responsive view logic

---

### Guinea Pigs Resting on Items Without Interacting
**Priority:** MEDIUM
**Status:** üìã Not Started
**Category:** Behavior Improvement

**Issue:** Guinea pigs stop on items without triggering interactions

**Solution - Auto-Trigger Interaction on Landing:**

**Behavior Changes:**
- **Landing on item = automatic interaction trigger**
- **Toys:** "play with" interaction triggers
- **Chew Items:** "chew" interaction triggers
- **Shelters/Beds:** Casual "hang out" interactions with relaxed messaging:
  - "hangs out in [shelter name]"
  - "relaxes in [bed name]"
  - "chills out on [item]"
  - "rests in [shelter]"

**Benefits:**
- More realistic guinea pig behavior
- Clearer cause-and-effect for player
- Items always feel purposeful
- Eliminates "idle on item" confusion

**Implementation Complexity:**
This feature requires significant changes to the behavior system:
1. Hook into `movement.onArrival()` callback system
2. Detect items at arrival position (check `habitatConditions.itemPositions`)
3. Determine item type (toy, chew, shelter, bed)
4. Trigger appropriate interaction based on item type
5. Add new "casual hang out" interaction type for shelters/beds
6. Prevent duplicate interactions if already interacting
7. Handle edge cases (moving off item, switching items)

**Files to Modify:**
- [useGuineaPigBehavior.ts](../src/composables/game/useGuineaPigBehavior.ts) - Landing detection and auto-interaction logic
- [useMovement.ts](../src/composables/game/useMovement.ts) - May need arrival context (landed on item vs. open cell)
- Activity feed messaging for casual shelter/bed interactions

---

## üéØ **Phase 5 Implementation (Continued)**

**Status:** üöß In Progress - System 22 Component 1 Complete, System 28 Foundation Complete

### System 22 Component 2: Guinea Pig Rescue System
**Priority:** HIGH
**Status:** üìã Not Started
**Category:** Phase 5 Implementation

**Goal:** Implement safety net system to prevent guinea pig death/severe neglect

**Components:**
1. **Wellness Monitoring:** Track when wellness drops below critical thresholds
2. **Auto-Intervention:** Automatically trigger basic care when critical
3. **Player Notification:** Inform player of auto-care actions taken
4. **Resource Management:** Auto-consume inventory items for rescue care

**Documentation:** [System 22 Component 2](systems/phase5/system-22-interaction-enhancement.md#component-2-guinea-pig-rescue-system)

---

### System 22 Component 3: Enhanced Activity Messages
**Priority:** HIGH
**Status:** üìã Not Started
**Category:** Phase 5 Implementation

**Goal:** Expand activity feed and chat bubbles with richer, more descriptive messages

**Components:**
1. **Contextual Messages:** Messages that reference current needs/wellness state
2. **Personality-Based Variation:** Different message styles based on personality
3. **Milestone Messages:** Special messages for friendship/wellness milestones
4. **Environmental Context:** Messages that reference habitat state
5. **Specialized Interaction Reactions:** More specific, contextual responses for each interaction type
   - "Sing To" ‚Üí "My favorite song!", "I love when you sing!", "‚ô™‚ô´ Beautiful! ‚ô´‚ô™"
   - "Talk To" ‚Üí More conversational responses
   - "Peek-a-Boo" ‚Üí Playful surprise responses
   - "Show Toy" ‚Üí Excitement about specific toys

**Files to Modify:**
- [guineaPigMessages.ts](../src/data/guineaPigMessages.ts) - Expand all message categories

**Documentation:** [System 22 Component 3](systems/phase5/system-22-interaction-enhancement.md#component-3-enhanced-activity-messages)

---

## üîÆ **Future Work (Deferred)**

The following items are deferred to future sprints:

### Remaining Phase 5 Systems
1. **System 23:** [Enrichment & Resource Management System](systems/phase5/system-23-enrichment-resource-management.md)
2. **System 23.5:** [Fulfillment Limitation System](systems/phase5/system-23.5-fulfillment-limitation.md)
3. **System 24:** Progression & Economy System
4. **System 25:** Game Tutorial System
5. **System 26:** Performance Mode System
6. **System 27:** Sound System
7. **System 28:** Settings & Preferences System (Foundation complete, expand with theme/animation/sound settings)
8. **System 29:** Guinea Pig Animation System

---

## üìù **Notes**

### Active Items üöß

**Current Focus:**
- üöß Social interactions refinement (sleep, follow, bonding display)

**Next Priority:**
- Code & CSS audit post-interactions
- System 22 Component 2: Guinea Pig Rescue System
- System 22 Component 3: Enhanced Activity Messages
- Auto-trigger interactions on item landing

### Next Steps
1. **Fix sleep together positioning and redundant messages**
2. **Fix follow interaction to use actual path following**
3. **Fix bonding percentage display (3000% bug)**
4. **Run code and CSS audit**
5. **Continue System 22 Components 2-3**

---

## ‚úÖ **Completed This Sprint**

_Items will be added here as work is completed_

---
