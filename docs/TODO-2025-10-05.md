# GPS2 Implementation TODO - October 5, 2025

**Created:** October 5, 2025
**Last Updated:** October 7, 2025
**Status:** Phase 2.5 Ready üöÄ
**Branch:** TBD
**Previous:** [TODO-2025-10-04.md](archive/TODO-2025-10-04.md)

---

## üéØ **Phase 2.5: Interactive Feedback Enhancement**

### Overview
Enhance gameplay feedback through personality traits, preferences, wellness-based reactions, rescue system, and comprehensive activity messages. These systems build on Phase 2 foundations to create unique, responsive guinea pig personalities.

**Duration:** 1-2 weeks
**Goal:** Rich interactive feedback making each guinea pig feel unique and alive

---

## üìã **Active Tasks**

### System 1: Personality Trait Influences ‚úÖ
**Priority:** HIGH (foundational)
**Status:** Complete

- [x] Add personality trait modifiers to guinea pig store
- [x] Implement need decay rate calculations with personality
- [x] Create interaction effectiveness modifiers
- [x] Add personality-based reaction logic
- [x] Build Personality Debug panel with trait adjustment
- [x] Add decay rate preview calculator
- [x] Replaced Independence trait with Boldness (affects Comfort instead of Social)
- [x] Fixed friendliness decay formula direction
- [ ] **Testing needed:** Verify personality effects on gameplay

**Files Updated:**
- `src/stores/guineaPigStore.ts` (added getPersonalityDecayModifier)
- `src/stores/petStoreManager.ts` (updated random generation)

**Files Created:**
- `src/components/debug/PersonalityDebug.vue`

**Documentation:** [System 1: Personality Trait Influences](systems/phase2.5/system-1-personality-trait-influences.md)

---

### System 2: Preferences: Likes & Dislikes ‚úÖ
**Priority:** HIGH (foundational)
**Status:** Complete - Testing Needed

- [x] Add preferences data structure to guinea pig
- [x] Implement hidden preference system (favorites/neutral/dislikes)
- [x] Create preference response modifiers (+50%, -30%)
- [x] Add rejection logic for disliked items (50% food, 70% activities)
- [x] Update interaction methods with preference checks
- [x] Add food selection dropdowns to NeedsDebug (hunger need)
- [x] Add activity selection dropdowns to NeedsDebug (play/stimulation needs)
- [x] Updated feedGuineaPig with preference system
- [x] Updated playWithGuineaPig with preference system
- [x] Enhanced MessageGenerator with preference-aware messages
- [ ] **Testing needed:** Test food preferences (favorites, dislikes, rejection)
- [ ] **Testing needed:** Test activity preferences (favorites, dislikes, rejection)

**Files Updated:**
- `src/stores/guineaPigStore.ts` (feedGuineaPig, playWithGuineaPig with preferences)
- `src/components/debug/NeedsDebug.vue` (food and activity selection dropdowns)
- `src/utils/messageGenerator.ts` (preference-aware messages)

**Testing Tools:**
- Guinea Pig Editor (Pet Store Debug) - Edit preferences
- NeedsDebug panel - Test with food/activity dropdowns

**Documentation:** [System 2: Preferences: Likes & Dislikes](systems/phase2.5/system-2-preferences-likes-dislikes.md)

---

### System 2.5: Fulfillment Limitation System üîÑ
**Priority:** HIGH (prevents exploitation)
**Status:** In Progress - Testing & UI Polish

- [x] Add consumption limits data structure to guinea pig
- [x] Implement hunger cycle based consumption tracking
- [x] Create food type limits (fruit:1, vegetables:3, pellets:2, treats:1, hay:unlimited)
- [x] Add consumption limit checking to feedGuineaPig
- [x] Reset consumption limits when hunger fulfilled to 100%
- [x] Build FeedingDebug.vue with food selection and consumption counters
- [x] Add "Servings Remaining: X/Y" display
- [x] Disable feed button when limit reached
- [x] Add "Fulfill Session Hunger" button (resets limits)
- [x] Wrapped hunger status in stats-grid
- [x] Applied panel--compact styling
- [x] Added pause/play toggle to utility-nav
- [x] Standardized debug page widths (1200px constrained panels)
- [ ] **Testing needed:** Verify consumption limits work correctly
- [ ] **Testing needed:** Test limit reset on hunger fulfillment
- [ ] **UI Polish:** Improve consumption counter visibility
- [ ] **UI Polish:** Add better disabled state feedback
- [ ] Implement interaction rejection system (play/social)
- [ ] Add rejection probability calculation (personality + friendship + wellness)
- [ ] Create rejection cooldown system (30s-2min)
- [ ] Add rejection friendship penalty (-1% to -5%)

**Files Updated:**
- `src/stores/guineaPigStore.ts` (consumption limits, feedGuineaPig updates)
- `src/stores/petStoreManager.ts` (consumption limit initialization)
- `src/components/layout/UtilityNav.vue` (pause/play toggle)
- `src/styles/base.css` (tab-container__panel--constrained)
- `src/components/layout/TabContainer.vue` (panelClass support)
- `src/views/DebugView.vue` (constrained panel classes)

**Files Created:**
- `src/components/debug/FeedingDebug.vue` (dedicated feeding panel)
- `src/views/FeedingDebugView.vue` (feeding debug view wrapper)
- `docs/systems/phase2.5/system-2.5-fulfillment-limitation.md`

**Testing Tools:**
- FeedingDebug panel - Test consumption limits and hunger fulfillment
- Utility Nav - Pause/play toggle for needs processing

**Documentation:** [System 2.5: Fulfillment Limitation](systems/phase2.5/system-2.5-fulfillment-limitation.md)

---

### System 3: Wellness-Based Interaction Reactions
**Priority:** MEDIUM (uses personality)
**Status:** Not Started

- [ ] Create wellness tier system (5 tiers: 80%+, 60-79%, 40-59%, 20-39%, <20%)
- [ ] Implement interaction success rate calculator (95% ‚Üí 20%)
- [ ] Add behavioral state system (thriving/content/stressed/withdrawn/critical)
- [ ] Create rejection logic with cooldowns (30-60s)
- [ ] Update all interaction methods with wellness checks

**Files to Update:**
- `src/stores/guineaPigStore.ts` (add wellness-based reactions)
- `src/stores/needsController.ts` (add behavioral states)

**Testing Tools:**
- NeedsDebug panel - Adjust wellness/needs to test different tiers
- Activity Feed - Observe interaction success/rejection messages

**Documentation:** [System 3: Wellness-Based Interaction Reactions](systems/phase2.5/system-3-wellness-interaction-reactions.md)

---

### System 4: Guinea Pig Rescue System
**Priority:** MEDIUM (uses wellness)
**Status:** Not Started

- [ ] Create rescue detection system (wellness < 15%)
- [ ] Implement rescue action (needs ‚Üí 100%, $200 penalty)
- [ ] Create Fresh Start option ($1000 reset, lose slots 4-10)
- [ ] Build rescue modal dialogs (BaseDialog/ConfirmDialog)
- [ ] Add warning for guinea pigs in slots 4-10
- [ ] Create preview mode for dialog testing
- [ ] Integrate rescue controls into NeedsDebug panel
- [ ] Add rescue threshold adjustment slider

**Files to Update:**
- `src/stores/needsController.ts` (add rescue detection)
- `src/stores/playerProgression.ts` (add Fresh Start)
- `src/components/debug/NeedsDebug.vue` (add rescue controls)

**Files to Create:**
- `src/components/dialogs/RescueDialog.vue`
- `src/components/dialogs/FreshStartDialog.vue`

**Documentation:** [System 4: Guinea Pig Rescue](systems/phase2.5/system-4-guinea-pig-rescue.md)

---

### System 5: Enhanced Activity Messages
**Priority:** LOW (uses all systems)
**Status:** Not Started

- [ ] Create need warning system (20-30% warning, <15% critical)
- [ ] Implement throttling (60s warnings, 30s critical)
- [ ] Add wellness-based activity messages (4 ranges)
- [ ] Create like/dislike clue messages
- [ ] Implement friendship milestone tracking (6 tiers)
- [ ] Add guinea pig reaction messages to interactions

**Files to Update:**
- `src/stores/needsController.ts` (add warning system)
- `src/stores/activityFeed.ts` (add message categories)
- `src/utils/messageGenerator.ts` (add new templates)

**Testing Tools:**
- Activity Feed - Observe message throttling, reactions, warnings

**Documentation:** [System 5: Enhanced Activity Messages](systems/phase2.5/system-5-enhanced-activity-messages.md)

---

## üîÑ **Integration Tasks**

### Cross-System Integration
- [ ] Integrate personality traits with need decay (System 1 ‚Üí needsController)
- [ ] Connect preferences to interaction methods (System 2 ‚Üí guineaPigStore)
- [ ] Link wellness to interaction success rates (System 3 ‚Üí all interactions)
- [ ] Integrate rescue system with wellness monitoring (System 4 ‚Üí needsController)
- [ ] Connect all systems to enhanced activity messages (System 5 ‚Üí activityFeed)

### UI/UX Integration
- [ ] Add personality trait displays to guinea pig panels
- [ ] Create preference discovery hints in activity feed
- [ ] Add wellness tier indicators to guinea pig status
- [ ] Implement rescue dialog modals
- [ ] Create activity message filtering and preview

### Activity Feed Integration
- [ ] Add guinea pig reaction messages to all interactions
- [ ] Implement need warning messages with throttling
- [ ] Create wellness-based activity messages
- [ ] Add like/dislike clue messages
- [ ] Implement friendship milestone notifications

---

## üß™ **Testing & Validation**

### System Testing
- [ ] Test personality trait effects on need decay rates
- [ ] Validate preference response modifiers (favorites/dislikes)
- [ ] Test consumption limits (fruit:1, vegetables:3, pellets:2, treats:1)
- [ ] Verify limit reset on hunger fulfillment (100%)
- [ ] Test hay unlimited consumption
- [ ] Test wellness tier success rates (95% ‚Üí 20%)
- [ ] Verify rescue trigger at wellness < 15%
- [ ] Check activity message throttling (60s/30s)
- [ ] Test friendship milestone tracking

### Integration Testing
- [ ] Test personality + wellness + preferences combined effects
- [ ] Test consumption limits + preferences combined
- [ ] Validate rescue ‚Üí Fresh Start ‚Üí slot 4-10 loss
- [ ] Test interaction rejection with cooldowns
- [ ] Verify need warnings don't spam
- [ ] Check guinea pig reactions to all interactions

### UI/UX Testing
- [x] Debug panel width standardization (1200px constrained)
- [x] Pause/play toggle functionality in utility-nav
- [ ] Consumption counter visibility and clarity
- [ ] Mobile responsiveness of debug panels
- [ ] Rescue dialog modal flow
- [ ] Fresh Start warning clarity
- [ ] Activity message readability
- [ ] Debug controls accessibility

---

## üìù **Documentation Tasks**

- [x] Document personality trait influences ‚úÖ
- [x] Document preferences system ‚úÖ
- [x] Document fulfillment limitation system ‚úÖ
- [x] Document wellness-based reactions ‚úÖ
- [x] Document rescue system ‚úÖ
- [x] Document enhanced activity messages ‚úÖ
- [ ] Update SYSTEM_INTEGRATION.md with Phase 2.5 systems
- [ ] Create Phase 2.5 testing guide

---

## üé® **UI/UX Polish**

- [x] Debug panel organization (added FeedingDebug panel)
- [x] Standardized debug page widths (1200px constrained, needs full-width)
- [x] Pause/play toggle in utility-nav
- [x] Panel--compact styling for FeedingDebug
- [x] Stats-grid layout for hunger status
- [ ] Consumption counter visibility improvements
- [ ] Better disabled state feedback for feed buttons
- [ ] Personality trait display styling
- [ ] Wellness tier visual indicators
- [ ] Rescue dialog styling (danger theme)
- [ ] Fresh Start warning prominence
- [ ] Activity message category badges

---

## ‚úÖ **Recently Completed**

### Phase 2: System 6.95 - SUPERSEDED BY REDESIGN (October 11, 2025)
> **Note:** Original System 6.95 implementation (escalating store refresh costs, session ending outcomes) has been **completely replaced** by a new permanent adoption design philosophy. See System 6.95 REDESIGN in Planned Work below.

**Original Implementation (Now Deprecated):**
- Escalating Store Refresh Costs ($100‚Üí$3,200)
- Three Session Ending Outcomes (based on favorites)
- Session Ending Dialog with player choice
- Bonding grief effects placeholder

**Status:** Implementation completed but design superseded. Code will be removed during redesign implementation.

**Files to be Refactored:**
- `src/stores/petStoreManager.ts` - Remove session ending logic, escalating costs
- `src/components/game/SessionEndingDialog.vue` - Remove component
- `src/components/debug/GameController.vue` - Remove dialog integration, penalty slider
- `src/components/debug/PetStoreDebug.vue` - Remove refresh settings, create new Favorites Debug panel

### Phase 2.5 System 2.5 - Fulfillment Limitation (October 10, 2025)
- ‚úÖ **Consumption Limits** - Core implementation complete
  - Hunger cycle based consumption tracking (fruit:1, vegetables:3, pellets:2, treats:1, hay:unlimited)
  - Consumption limit checking and reset on hunger fulfillment
  - FeedingDebug.vue with food selection and servings remaining display
  - "Fulfill Session Hunger" button to reset limits
- ‚úÖ **UI Improvements** - Debug panel standardization
  - Pause/play toggle in utility-nav (matches game-controller)
  - Standardized debug page widths (1200px constrained panels, needs full-width)
  - Panel--compact styling for FeedingDebug
  - Stats-grid layout for hunger status
  - Tab container panelClass support for per-tab width control

### Phase 2.5 System 1 & 2 (October 7, 2025)
- ‚úÖ **System 1: Personality Trait Influences** - Complete (testing needed)
  - Personality modifiers for need decay (Friendliness‚ÜíSocial, Playfulness‚ÜíPlay, Curiosity‚ÜíStimulation, Boldness‚ÜíComfort)
  - PersonalityDebug.vue with trait sliders and decay rate preview
  - Replaced Independence with Boldness trait
  - Fixed friendliness decay formula direction
- ‚úÖ **System 2: Preferences** - Complete (testing needed)
  - Food preferences (favorites +50%, dislikes -30% or 50% rejection)
  - Activity preferences (favorites +50%, dislikes -40% or 70% rejection)
  - Food/activity selection dropdowns in NeedsDebug
  - Preference-aware messages in MessageGenerator
  - Game pause fix (connected to needs pause)

### Phase 2.5 Documentation (October 7, 2025)
- ‚úÖ **System Documentation** - All 5 Phase 2.5 systems documented
- ‚úÖ **File Renaming** - Reordered systems 1-5 to optimal development order
- ‚úÖ **PROJECT_PLAN.md** - Added Phase 2.5 section with all systems
- ‚úÖ **DEVELOPMENT_PHASES.md** - Added complete Phase 2.5 section
- ‚úÖ **TODO Updated** - Converted from Phase 3 to Phase 2.5 tasks

### Phase 2 Complete (October 5, 2025)
- ‚úÖ **Pet Store Debug UI Optimization** - Details component, panel reorganization
- ‚úÖ **Needs System Major Refactor** - 11-need structure, new interactions, weighted wellness
- ‚úÖ **Needs Debug UI Optimization** - Responsive layout, need-specific colors, accessible contrast
- ‚úÖ **All Phase 2 Systems** - Pet Store, Favorites, Needs, Timing all complete
- ‚úÖ **Mobile Responsiveness** - All debug panels responsive below 1440px

---

## üìä **Phase Status**

**Phase 2: Complete ‚úÖ** (Some systems pending redesign)
- Pet Store & Game Session Manager (6.5)
- Guinea Pig Favorites (6.9)
- ~~Session Ending & Store Refresh Enhancement (6.95)~~ - **Superseded by redesign**
- Needs System (7) - 11 needs with quick actions
- Needs Controller (8) - Manual pause tracking
- Game Timing (9-10) - Pause/resume integration

**Phase 2.5: In Progress üöß**
- Personality Trait Influences (1) - Complete ‚úÖ (Testing Needed)
- Preferences: Likes & Dislikes (2) - Complete ‚úÖ (Testing Needed)
- Fulfillment Limitation System (2.5) - In Progress üîÑ (Testing & UI Polish)
- Wellness-Based Interaction Reactions (3) - Not Started
- Guinea Pig Rescue (4) - Not Started
- Enhanced Activity Messages (5) - Not Started

**Phase 2: System 6.95 REDESIGN - Planned üìã**
- **[System 6.95: Permanent Adoption & Natural Store Churn](systems/phase2/system-6.95-REDESIGN-permanent-adoption.md)**
- **Prerequisite:** Friendship System Enhancement (0-100 scale, 85% threshold for favoriting)
- **Implementation Phases:**
  1. Remove ALL refresh mechanics (manual button, costs, 24-hour auto-refresh)
  2. Implement adoption timers and natural store churn (2-5 days per guinea pig)
  3. Create dedicated Favorites Debug panel (separate from Pet Store)
  4. Implement friendship-gated favoriting (85% threshold)
  5. Add pairing validation (New+New ‚úÖ, Favorite+Favorite ‚úÖ, New+Favorite ‚ùå)
  6. Implement bond preservation when both guinea pigs favorited
  7. Update store access gating (can only return when all active favorited)
  8. Implement "Observe [Name]" one-time interaction showing personality
- **Key Changes:**
  - Permanent adoption (no returns, no abandonments, no sessions)
  - Favorites as achievement unlock (not protection mechanism)
  - Natural store evolution (no manual refresh)
  - Max 2 active guinea pigs, up to 10 favorite slots (purchasable)
  - Friendship freeze while in "Favorite Land"
  - Guinea Pig Rescue & Fresh Start preserve favorites

**Phase 3: Queued üìã**
- Habitat Conditions (11) - Waiting for Phase 2.5
- Habitat Items (12) - Waiting for Phase 2.5
- Inventory & Store (13) - Waiting for Phase 2.5
- Habitat Maintenance (14) - Waiting for Phase 2.5

---

## üîß **Development**

**Commands:**
- Build: `npm run build` (run before commits)
- Dev: `npm run dev`

**Documentation:**
- [Development Phases](DEVELOPMENT_PHASES.md)
- [System Integration](SYSTEM_INTEGRATION.md)
- [Phase 2.5 Systems](systems/phase2.5/)
