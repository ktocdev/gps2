# System 14: Habitat Items

**Phase:** 3.14 - Habitat & Environment

## Overview
Interactive item placement system creating enriched habitat environments with drag & drop functionality, automatic guinea pig interaction, and strategic item rotation mechanics.

## Core Functionality

### Grid-Based Habitat Layout
- **Drag & drop item placement** with grid-based positioning system
- **Spatial constraints** ensuring realistic item placement and accessibility
- **Visual feedback** during item placement with valid/invalid position indicators
- **Grid optimization** for different habitat sizes and layouts

### Item Interaction System
- **Automatic guinea pig usage** - guinea pig autonomously interacts with placed items
- **Need-based item selection** - guinea pig chooses items based on current needs
- **Realistic usage patterns** - items used according to guinea pig behavior and preferences
- **Usage tracking** for effectiveness monitoring and rotation planning

## Default Habitat Items

### Essential Starting Items
- **Water bottle** - Essential hydration source, refillable for free
- **Food dish** - Primary feeding location for hay, vegetables, and treats
- **Hay rack** - Essential feeding system requiring hay resource management and freshness monitoring
- **Small shelter** - Basic hiding location for shelter need satisfaction and security
- **Small chew toy** - Entry-level enrichment for dental health and happiness

### Starter Kit Benefits
- **Complete basic setup** enabling immediate guinea pig care
- **Learning foundation** introducing players to item placement and usage
- **Upgrade pathway** creating natural progression to advanced items
- **Budget management** balancing free essentials with purchasable enhancements

## Sleep Enhancement System

### Bed Item Placement
- **Grid requirements** - beds require 1x1 to 2x2 grid spaces depending on type
- **Accessibility zones** - beds must be accessible from at least one adjacent grid space
- **Shelter proximity detection** - system automatically detects bed-shelter combinations within 1 grid space
- **Comfort area creation** - beds establish comfort zones affecting surrounding grid spaces

### Bed-Shelter Combination Mechanics
- **Proximity bonus** - beds placed adjacent to shelters provide +30% enhanced benefits
- **Security enhancement** - shelter + bed combinations reduce stress and improve sleep quality
- **Combination detection** - automatic system recognition of bed-shelter pairings
- **Visual feedback** - UI indicators show when beneficial combinations are achieved

### Sleep Quality Enhancement
- **Energy recovery multipliers** - beds provide 25-50% faster energy restoration during sleep
- **Happiness bonuses** - comfortable sleeping adds 10-20 happiness points per rest cycle
- **Need satisfaction rates** - beds improve efficiency of energy need recovery
- **Individual preferences** - guinea pigs show preferences for specific bed types affecting bonus effectiveness

### Bed Usage Patterns
- **Autonomous selection** - guinea pig chooses beds based on energy levels and preferences
- **Sleep duration scaling** - lower energy levels result in longer sleep periods on beds
- **Comfort seeking** - guinea pig seeks beds when stressed or tired
- **Quality indicators** - sleep effectiveness displayed through guinea pig behavior and reactions

## Shelter Security System

### Shelter Need Satisfaction
- **Primary function** - shelters directly satisfy the shelter need through hiding and security
- **Proactive usage** - guinea pig seeks shelters when shelter need drops below 60%
- **Preference-based selection** - individual guinea pigs prefer different shelter types and styles
- **Security zones** - shelters create comfort areas that provide passive shelter satisfaction

### Shelter Item Types
- **Enclosed shelters** - fully covered hiding spots for maximum security feeling
- **Open shelters** - partial coverage for guinea pigs preferring visibility while hiding
- **Elevated shelters** - raised hiding spots providing territorial advantage and security
- **Multi-entrance shelters** - shelters with multiple exits for security-conscious guinea pigs
- **Cozy shelters** - small, snug spaces for guinea pigs preferring tight, secure areas
- **Spacious shelters** - larger shelters for guinea pigs preferring room to move while hidden

### Shelter Placement Strategy
- **Security positioning** - shelters most effective when placed in quieter habitat areas
- **Accessibility requirements** - shelters must be reachable from multiple habitat locations
- **Bed combination bonuses** - shelters near beds provide enhanced security and rest benefits
- **Multiple shelter benefits** - several shelters allow guinea pig to establish security network

### Shelter Effectiveness Mechanics
- **Base shelter satisfaction** - all shelters provide standard shelter need restoration
- **Preference bonuses** - preferred shelter types provide +25% enhanced effectiveness
- **Familiarity enhancement** - regularly used shelters gain +15% effectiveness over time
- **Environmental security** - shelters in secure locations provide additional anxiety reduction

### Shelter Usage Patterns
- **Comfort checking** - brief shelter visits for security reassurance
- **Extended hiding** - longer shelter usage when shelter need low or stressed
- **Territory establishment** - regular shelter use creates guinea pig security zones
- **Safety base behavior** - shelters used as secure starting points for exploration

### Integration with Other Systems
- **Bed synergy** - shelter + bed combinations provide enhanced sleep and security
- **Stress reduction** - adequate shelter access reduces environmental anxiety
- **Friendship correlation** - high friendship can partially offset shelter need through trust
- **Wellness contribution** - shelter need satisfaction essential for overall wellness rating

## Hay Rack Resource Management System

### Hay Resource Integration
- **Consumable resource dependency** - hay rack requires hay from player inventory to function
- **Freshness monitoring** - displays current hay freshness level (0-100)
- **Automatic consumption** - hay depletes over time and through guinea pig feeding
- **Critical function** - empty hay rack prevents autonomous hunger satisfaction

### Hay Rack Mechanics
- **Refill system** - players must manually refill hay rack from inventory
- **Hay type selection** - choose which hay type to use for refilling
- **Quantity management** - track remaining hay supply in rack
- **Freshness decay** - hay freshness decreases over time, affecting nutritional value

### Visual Status Indicators
- **Hay level display** - visual representation of hay quantity remaining
- **Freshness color coding** - green (fresh), yellow (aging), red (stale)
- **Empty rack warning** - clear visual alert when hay rack is empty
- **Hay type indicator** - shows which type of hay is currently loaded

### Refilling Process
- **Inventory access** - refill hay rack directly from player hay inventory
- **Type switching** - ability to change hay types for preference optimization
- **Quantity selection** - choose how much hay to load (full refill vs partial)
- **Resource confirmation** - confirm hay usage from limited inventory supplies

### Hunger Satisfaction Dependency
- **Autonomous feeding requirement** - guinea pig can only satisfy hunger if hay rack has fresh hay
- **Freshness quality impact** - fresher hay provides better hunger satisfaction
- **Empty rack consequences** - guinea pig cannot eat autonomously, relies on hand feeding only
- **Critical alert system** - urgent notifications when hay rack becomes empty

### Strategic Importance
- **Essential maintenance** - hay rack management critical for guinea pig survival
- **Resource planning** - players must anticipate hay needs and maintain supplies
- **Quality optimization** - balance hay freshness vs resource conservation
- **Emergency backup** - hand feeding available when hay rack fails but less efficient

### Integration with Other Systems
- **Habitat conditions** - hay rack freshness contributes to overall habitat quality
- **Inventory management** - direct connection to hay resource tracking
- **Economic gameplay** - ongoing hay purchases create resource pressure
- **Preference system** - optimal hay type selection based on guinea pig preferences

## Happiness-Focused Items

### Enrichment Toys
- **Tunnel systems** - Complex navigation and exploration opportunities
- **Exercise wheels** - Physical activity and entertainment (adapted for guinea pig safety)
- **Chew toys** - Variety of textures and materials for dental health and satisfaction
- **Climbing platforms** - Multi-level exploration and territory expansion

### Interactive Items
- **Puzzle feeders** - Mental stimulation requiring problem-solving for food access
- **Treat-hiding toys** - Foraging activities encouraging natural searching behaviors
- **Mirrors** - Social stimulation and curiosity engagement
- **Bells** - Sound-based interaction and play opportunities

### Comfort Items
- **Soft hideouts** - Premium comfort locations for rest and security
- **Elevated platforms** - Territory expansion and observation points
- **Cozy sleeping areas** - Specialized rest locations with enhanced comfort
- **Temperature regulation items** - Seasonal comfort enhancements

### Seasonal/Themed Items
- **Holiday decorations** - Festive habitat themes with temporary happiness bonuses
- **Themed cage setups** - Complete environmental themes (forest, beach, winter)
- **Special event items** - Limited-time exclusive items creating urgency and value
- **Community celebration items** - Shared event participation and social elements

## Item Variety & Rotation System

### Effectiveness Decay Mechanics
- **Boredom factor** - items lose effectiveness over time if not rotated
- **Familiarity penalties** - repeated use reduces happiness benefits
- **Staleness tracking** - system monitors item usage patterns and effectiveness
- **Rotation incentives** - clear benefits for strategic item management

### Novelty & Introduction Benefits
- **New item bonus** - recently introduced items provide maximum happiness benefit
- **Discovery excitement** - first-time item introduction creates special positive reactions
- **Freshness duration** - novelty effects last for defined periods before decay begins
- **Reintroduction benefits** - stored items regain some effectiveness when returned

### Strategic Storage & Rotation
- **Item storage system** - players can remove items to habitat inventory for rotation
- **Storage capacity** - limited storage encourages strategic planning
- **Rotation planning** - players develop optimal item cycling strategies
- **Novelty maintenance** - continuous variety management for sustained happiness

### Item Combination Synergies
- **Synergy bonuses** - certain item combinations create enhanced effects
- **Environmental themes** - related items provide compound benefits
- **Activity combinations** - tunnel + platform = exploration bonus
- **Discovery rewards** - players find effective combinations through experimentation

## Advanced Item Features

### Quality & Durability System
- **Item effectiveness** varies based on quality levels (basic, standard, premium)
- **Durability tracking** - items wear over time requiring replacement
- **Quality benefits** - higher quality items provide enhanced effects and longer life
- **Upgrade pathways** - progression from basic to premium versions

### Item Wear & Replacement
- **Usage-based wear** - heavily used items degrade faster
- **Visual wear indicators** - clear feedback on item condition
- **Replacement timing** - optimal replacement strategies for continuous effectiveness
- **Disposal and recycling** - eco-friendly item management options

### Achievement-Based Unlocks
- **Special items** unlock based on guinea pig age milestones
- **Care achievement rewards** - exceptional care unlocks premium items
- **Progression gates** - advanced items require demonstrated expertise
- **Exclusive content** - unique items for dedicated players

### Positioning & Effectiveness
- **Strategic placement** - item positioning affects effectiveness and usage
- **Proximity benefits** - water near food, toys in activity areas
- **Traffic patterns** - guinea pig movement influences optimal item placement
- **Environmental optimization** - habitat layout strategies for maximum effectiveness

## Technical Implementation

### Grid System Architecture
```typescript
interface HabitatGrid {
  width: number
  height: number
  cells: GridCell[][]
  placedItems: PlacedItem[]
}

interface PlacedItem {
  itemId: string
  gridPosition: Position
  effectiveness: number
  lastUsed: Date
  durability: number
}
```

### Item Management System
- **Drag & drop interface** with Vue 3 Composition API
- **Grid constraint validation** preventing invalid placements
- **Real-time effectiveness tracking** for rotation optimization
- **Performance optimization** for smooth interaction experience

### Guinea Pig AI Integration
- **Item usage algorithms** based on needs and preferences
- **Pathfinding to items** with realistic movement patterns
- **Usage frequency modeling** for authentic behavior simulation
- **Preference learning** affecting item selection patterns

## Integration Points

### Needs System Connection
- **Item usage** affects specific needs (happiness, health, energy)
- **Effectiveness scaling** based on guinea pig needs levels
- **Usage timing** coordinated with needs decay and satisfaction
- **Cross-need benefits** where items affect multiple needs simultaneously

### Inventory & Store Integration
- **Item purchasing** through store system with currency management
- **Inventory management** for owned but unplaced items
- **Storage limitations** creating strategic placement decisions
- **Economic pressure** balancing item purchases with other expenses

### Activity Feed Integration
- **Item placement messages** - "You place a tunnel in the habitat"
- **Guinea pig usage descriptions** - "Guinea pig explores the new tunnel curiously"
- **Effectiveness feedback** - "Guinea pig seems bored with the old wheel"
- **Rotation suggestions** - "Consider rotating some toys for variety"

### Logging & Debug Integration
- **Item interaction logging** for balance validation
- **Effectiveness tracking** for optimization
- **Usage pattern analysis** for AI behavior tuning
- **Performance monitoring** for grid system optimization

## Gameplay Benefits

### Strategic Depth
- **Resource management** balancing item purchases and effectiveness
- **Planning skills** developing optimal rotation strategies
- **Spatial reasoning** optimizing habitat layout for guinea pig behavior
- **Long-term thinking** managing item lifecycles and replacement timing

### Player Engagement
- **Customization satisfaction** creating personalized guinea pig environments
- **Discovery rewards** finding effective item combinations and placement strategies
- **Progression goals** unlocking advanced items through achievement
- **Creative expression** designing unique habitat themes and layouts

### Guinea Pig Simulation
- **Realistic environment** with authentic item usage patterns
- **Individual preferences** affecting item selection and effectiveness
- **Natural behaviors** encouraged through appropriate environmental enrichment
- **Welfare simulation** requiring attention to guinea pig environmental needs

## Future Enhancement Opportunities

### Advanced Item Systems
- **Seasonal item effects** with environmental factor integration
- **Community item sharing** and custom item creation
- **Advanced physics** for more realistic item interaction
- **Environmental storytelling** through themed item collections

### Customization Expansion
- **Habitat themes** with comprehensive environmental overhauls
- **Custom item creation** allowing player creativity and sharing
- **Seasonal decorations** with automated theme changes
- **Community challenges** focused on creative habitat design

### AI Enhancement
- **Learning preferences** where guinea pig develops favorite item combinations
- **Social behaviors** with items designed for multiple guinea pig interaction
- **Seasonal behavior patterns** affecting item usage throughout the year
- **Individual personality** expression through unique item usage patterns