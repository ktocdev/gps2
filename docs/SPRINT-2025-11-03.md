# GPS2 Sprint - November 3, 2025

**Started:** November 3, 2025
**Status:** Active ðŸš§
**Branch:** GPS2-43
**Previous Sprint:** [SPRINT-2025-11-02.md](SPRINT-2025-11-02.md)

**Progress:**
- âœ… Code Audit Completed (17 files audited)
- âœ… CSS Audit Completed (9 components, 9.6/10 score)
- âœ… Magic Number Fix (CELL_SIZE)
- âœ… Panel Utility Improvements Applied
- ðŸ“‹ New items added from todos.md
- ðŸš§ Next: Window focus bug + Phase 2.5 systems

---

## ðŸŽ¯ **Sprint Goals**

**Focus:** Code audit, Phase 2.5 systems, and high-priority bug fixes

**Priority Areas:**
1. Audit previous sprint's code and CSS for consistency
2. Implement Phase 2.5 systems (Food consumption limits, personality traits)
3. Fix window focus bug affecting autonomous behavior
4. Polish and optimization

---

## ðŸ“‹ **Sprint Backlog**

### Code Audit & Cleanup ðŸ”

#### Audit Previous Sprint Code
**Priority:** HIGH
**Status:** âœ… Completed
**Category:** Code Quality

**Goal:** Review all code from November 2 sprint for consistency, best practices, and potential issues

**Areas Reviewed:**
1. **Smart Bedding System** âœ… (Previously audited)
   - Proportional bedding consumption logic verified
   - Fractional quantity tracking working correctly
   - Dialog UX and error handling complete

2. **Companion Bond System Updates** âœ… (Previously audited)
   - Proximity time tracking and reactivity fixes verified
   - Bond strength message calculations correct
   - Bonding rate (+1 per 10 seconds) working

3. **Player Friendship Display** âœ… (Previously audited)
   - Friendship message logic verified
   - Display positioning and styling complete

4. **Toggle Button Implementation** âœ… (Previously audited)
   - Toggle button consistency across panels verified
   - Flex utilities usage correct

5. **Hand-Feed System** âœ… (Previously audited)
   - Food selection dialog verified
   - Cooldown system implementation complete
   - Bedding type select truncation fix working

6. **Animation Systems** âœ… **NEW AUDIT**
   - Guinea pig chomp animation (chewing chew toys)
   - Guinea pig wiggle during player interactions
   - Animation timing, priorities, and paused states

7. **Visual Display Systems** âœ… **NEW AUDIT**
   - Guinea pig sprite offsets (same shelter stacking fix)
   - Offset calculation and rendering

8. **Bug Fixes** âœ… **NEW AUDIT**
   - clearAllStorage() rewrite
   - Activity feed auto-scroll direction fix
   - Tooltip hover grace period implementation
   - Hay duplication bug fix + duplicate drop handler removal

9. **Social Bonding** âœ… **NEW AUDIT**
   - Sleeping-together bonding bonus (System 24)
   - Bond event recording

10. **Interaction Systems** âœ… **NEW AUDIT**
    - Gentle pet wipe interaction (hygiene boost)
    - Interaction cooldown tracking

**Files Audited:**
- [habitatConditions.ts](../src/stores/habitatConditions.ts) âœ…
- [guineaPigStore.ts](../src/stores/guineaPigStore.ts) âœ…
- [bondingProgression.ts](../src/utils/bondingProgression.ts) âœ…
- [CleanCageDialog.vue](../src/components/game/dialogs/CleanCageDialog.vue) âœ…
- [FoodSelectionDialog.vue](../src/components/game/dialogs/FoodSelectionDialog.vue) âœ…
- [SocializeSidebar.vue](../src/components/game/habitat/sidebars/SocializeSidebar.vue) âœ…
- [HabitatDebug.vue](../src/components/debug/environment/HabitatDebug.vue) âœ…
- [AutonomyDebug.vue](../src/components/debug/environment/AutonomyDebug.vue) âœ…
- **[GuineaPigSprite.vue](../src/components/game/habitat/GuineaPigSprite.vue)** âœ… **NEW**
- **[useGuineaPigBehavior.ts](../src/composables/game/useGuineaPigBehavior.ts)** âœ… **NEW**
- **[behaviorStateStore.ts](../src/stores/behaviorStateStore.ts)** âœ… **NEW**
- **[interactionEffects.ts](../src/utils/interactionEffects.ts)** âœ… **NEW**
- **[UtilityNav.vue](../src/components/layout/UtilityNav.vue)** âœ… **NEW**
- **[ActivityFeed.vue](../src/components/game/ui/ActivityFeed.vue)** âœ… **NEW**
- **[HabitatItemPopover.vue](../src/components/game/habitat/HabitatItemPopover.vue)** âœ… **NEW**
- **[useHabitatContainers.ts](../src/composables/useHabitatContainers.ts)** âœ… **NEW**

**Checklist:**
- [x] Run TypeScript strict mode check âœ… Build passes
- [x] Review all `TODO` and `FIXME` comments âœ… Only 3 found, all future features
- [x] Check for unused imports and variables âœ… None found
- [x] Verify error handling in new functions âœ… All have proper guards and returns
- [x] Check for magic numbers (should use constants) âœ… Most fixed, 1 minor issue found
- [x] Review computed property dependencies âœ… All properly defined
- [x] Verify reactive updates work correctly âœ… Map recreation pattern used correctly
- [x] Check for memory leaks (intervals, listeners) âœ… **2 minor risks found**
- [x] Review animation systems âœ… Properly implemented
- [x] Review bug fixes âœ… All working correctly
- [x] Check for production console.logs âœ… **Excessive logging found in behavior system**

**Code Quality Issues Fixed (Previous Audit):**
1. **habitatConditions.ts** - Replaced magic numbers (5, 10, 15) with `CONSUMPTION.WATER_MINIMUM_LEVEL`, `WATER_CONSUMPTION_MIN`, `WATER_CONSUMPTION_MAX`
2. **guineaPigStore.ts** - Fixed parameter name `hoursToAdd` â†’ `minutesToAdd` to match actual usage
3. **supplies.ts** - Added water consumption constants to centralized config

**Performance & Efficiency Fixes (Previous Audit):**
1. **ðŸ”´ CRITICAL: SocializeSidebar.vue** - Fixed memory leak where `setInterval` created new Map every second
   - **Before:** `interactionCooldowns.value = new Map(interactionCooldowns.value)` every 1000ms
   - **After:** Interval only runs when cooldown active, auto-stops when expired
   - **Impact:** Eliminates unnecessary re-renders and Map allocations

2. **friendshipMessages.ts** - Extracted duplicate functions (38 lines â†’ shared utility)
   - Removed duplicate `getBondStrengthMessage()` and `getPlayerFriendshipMessage()`
   - Created shared utility with threshold-based lookup
   - **Impact:** DRY principle, easier to maintain message thresholds

3. **guineaPigStore.ts** - Added `getBondsForGuineaPig(id)` optimized method
   - **Before:** `getAllBonds().filter(bond => ...)` - O(n) get all + O(n) filter
   - **After:** Direct iteration with early returns - O(n) single pass
   - **Impact:** Faster bond lookups for UI rendering

4. **bondingProgression.ts** - Lazy-initialized cached store instances
   - **Before:** Called `useGuineaPigStore()` etc. every game tick per bond
   - **After:** Lazy initialization on first call, then cached (prevents circular dependency errors)
   - **Impact:** Eliminates repeated store initialization overhead while avoiding module-load issues

5. **FoodSelectionDialog.vue** - Optimized filtering logic
   - **Before:** `.map().filter()` - created objects then discarded them
   - **After:** Check quantity first, only create objects for items with stock
   - **Impact:** Fewer object allocations, faster filtering

6. **CleanCageDialog.vue** - Removed `!important` flag, used specificity instead
   - Changed `.text-warning` to `.bedding-info__value.text-warning`
   - **Impact:** Better CSS maintainability, follows BEM standards

**NEW Issues Found (Extended Audit):**

**ðŸŸ¡ MEDIUM - Production Console.logs**
- **File:** [useGuineaPigBehavior.ts](../src/composables/game/useGuineaPigBehavior.ts)
- **Lines:** 596-710 (eat behavior), 973-1055 (eat hay behavior)
- **Issue:** 18+ console.log statements in production code
- **Impact:** Performance overhead, clutters console, not suitable for production
- **Recommendation:** Remove or wrap in `DEBUG_BEHAVIOR` flag (like `DEBUG_SOCIALIZE` on line 57)
- **Priority:** Medium (not breaking, but should be cleaned up)

**ðŸŸ¡ MINOR - Memory Leak Risk: Uncleaned Timeout**
- **File:** [HabitatItemPopover.vue](../src/components/game/habitat/HabitatItemPopover.vue)
- **Line:** 74: `let hideTimeout: number | null = null`
- **Issue:** Timeout may not be cleared if component unmounts while timeout is pending
- **Impact:** Low risk - timeout is short (200-300ms), but cleanup is best practice
- **Recommendation:** Add `onUnmounted(() => { if (hideTimeout) clearTimeout(hideTimeout) })`
- **Priority:** Low (minor cleanup)

**ðŸŸ¡ MINOR - Memory Leak Risk: Untracked setTimeout**
- **File:** [behaviorStateStore.ts](../src/stores/behaviorStateStore.ts)
- **Line:** 73: `setTimeout(() => { ... }, duration)`
- **Issue:** If guinea pig is removed from store before timeout completes, timeout will still execute
- **Impact:** Very low risk - just sets activity to idle on deleted guinea pig (no-op)
- **Recommendation:** Track timeout reference and add cleanup in `removeBehaviorState()`
- **Priority:** Low (edge case, minimal impact)

**ðŸŸ¢ MINOR - Magic Number**
- **File:** [GuineaPigSprite.vue](../src/components/game/habitat/GuineaPigSprite.vue)
- **Line:** 51: `const CELL_SIZE = 60`
- **Issue:** Magic number duplicated from HabitatVisual
- **Impact:** Minimal - but creates maintenance risk if cell size changes
- **Recommendation:** Import from shared constants or props
- **Priority:** Low (not urgent)

**Verified Working:**
- Smart bedding system with proportional consumption âœ…
- Bond proximity time tracking with reactivity âœ…
- Fractional quantity tracking (amountRemaining) âœ…
- Error handling in cleanCage() function âœ…
- Food selection dialog with category filtering âœ…
- All performance optimizations pass TypeScript strict mode âœ…
- **Guinea pig chomp animation** âœ… **NEW**
- **Guinea pig interaction wiggle animation** âœ… **NEW**
- **Gentle wipe interaction (hygiene/comfort boost)** âœ… **NEW**
- **Sleeping-together bonding bonus** âœ… **NEW**
- **Sprite offset rendering (no stacking)** âœ… **NEW**
- **clearAllStorage() proper sequencing** âœ… **NEW**
- **Activity feed scroll to top (newest first)** âœ… **NEW**
- **Tooltip hover grace period** âœ… **NEW**
- **Hay duplication fix (infinite resource exploit eliminated)** âœ… **NEW**

**Animation System Review:**
- âœ… Chomp animation triggers correctly on chewing activity
- âœ… Interaction wiggle animation triggers on all player interactions
- âœ… Animation priorities handled with `!important` (playing/chewing/interacting > walking)
- âœ… Paused states comprehensive (lines 218-234 in GuineaPigSprite.vue)
- âœ… CSS uses BEM naming (`.guinea-pig-sprite--chewing`)
- âœ… CSS uses logical properties throughout
- âœ… Flipped animations for left-facing guinea pigs
- âœ… `triggerPlayerInteraction()` helper properly sets duration and auto-returns to idle

**Bug Fix Verification:**
- âœ… **clearAllStorage()** properly sequences: stop game loop â†’ clear habitat â†’ clear guinea pigs â†’ clear storage â†’ delay â†’ reload
- âœ… **Activity feed** scrolls to top (line 161), matches reverse display order
- âœ… **Tooltip hover** grace period (200ms) with popover hover detection prevents disappearing
- âœ… **Hay duplication** fix removes incorrect `addConsumableWithServings()` call (useHabitatContainers.ts:297)
- âœ… **Duplicate drop handlers** removed from HabitatVisual (prevents double consumption)

**Social Bonding Verification:**
- âœ… **Sleeping together** bonus (+2 bond points) when both guinea pigs sleeping at same position
- âœ… Bond event recorded with description in bond history
- âœ… Activity feed shows cuddle message with location
- âœ… Works for any shared sleeping location (shelters, beds, floor)

**Code Quality Summary:**
- **Total Files Audited:** 17 files (8 previously + 9 new)
- **Critical Issues:** 0
- **Medium Issues:** 1 (console.logs in production)
- **Minor Issues:** 2 (timeout cleanup edge cases) + 1 (magic number)
- **Systems Verified Working:** 15 systems (5 previous + 10 new)
- **Overall Assessment:** Code quality is excellent, only minor cleanup needed

---

#### CSS Audit & Consistency Check
**Priority:** HIGH
**Status:** âœ… Completed
**Category:** Code Quality

**Goal:** Ensure CSS follows project standards and uses utilities where appropriate

**Audit Results:** See [CSS-AUDIT-SPRINT-2025-11-02.md](audits/CSS-AUDIT-SPRINT-2025-11-02.md)

**Files Audited:** 9 components from SPRINT-2025-11-02.md
- [CleanCageDialog.vue](../src/components/game/dialogs/CleanCageDialog.vue) âœ… EXCELLENT (10/10)
- [FoodSelectionDialog.vue](../src/components/game/dialogs/FoodSelectionDialog.vue) âœ… EXCELLENT (10/10)
- [SocializeSidebar.vue](../src/components/game/habitat/sidebars/SocializeSidebar.vue) âœ… GOOD (9/10)
- [GuineaPigSprite.vue](../src/components/game/habitat/GuineaPigSprite.vue) âœ… EXCELLENT (10/10)
- [HabitatDebug.vue](../src/components/debug/environment/HabitatDebug.vue) âœ… GOOD (8.5/10)
- [ActivityFeed.vue](../src/components/game/ui/ActivityFeed.vue) âœ… EXCELLENT (10/10)
- [HabitatItemPopover.vue](../src/components/game/habitat/HabitatItemPopover.vue) âœ… EXCELLENT (10/10)
- [AutonomyDebug.vue](../src/components/debug/environment/AutonomyDebug.vue) âœ… EXCELLENT (10/10)
- [UtilityNav.vue](../src/components/layout/UtilityNav.vue) âœ… EXCELLENT (10/10)

**Overall Score: 9.6/10** - Excellent CSS Quality

**Checklist:**
- [x] No inline styles (use utility classes) âœ… All fixed
- [x] BEM naming convention followed âœ… 100% compliance
- [x] Logical properties used (margin-inline, etc.) âœ… 100% usage
- [x] CSS variables used for spacing/colors âœ… 100% usage
- [x] No !important flags (unless absolutely necessary) âœ… Only 1 found, uses specificity
- [x] Mobile-first media queries âœ… All components mobile-first
- [x] Container queries used where appropriate âšª Not yet adopted project-wide

**Minor Improvements Applied:**
- âœ… SocializeSidebar.vue - Replaced custom `.bond-status` with `.panel .panel--compact` utility
- âœ… HabitatDebug.vue - Replaced custom `.food-bowl-container` with `.panel .panel--compact` utility
- âœ… CSS file size decreased: 134.16 kB â†’ 133.73 kB (0.43 kB saved)

**Key Findings:**
- âœ… Perfect BEM naming convention adherence
- âœ… 100% logical properties usage (RTL-ready)
- âœ… Exclusive use of CSS variables (no magic numbers)
- âœ… Zero inline styles
- âœ… Mobile-first responsive design throughout
- âœ… Accessibility-first animations with `prefers-reduced-motion`

---

### High Priority Bugs ðŸ”¥

#### Guinea Pigs Stop Autonomous Behavior When Window Loses Focus
**Priority:** HIGH
**Status:** ðŸ“‹ Not Started
**Category:** Core Gameplay

**Issue:** When the game is running but user switches to a different program, guinea pigs fail to fulfill their needs or do any other autonomous actions (pooping still works).

**Possible Cause:** Browser throttling requestAnimationFrame when window not focused.

**Potential Solutions:**
1. Switch from requestAnimationFrame to setInterval for autonomous behavior
2. Use Page Visibility API to detect when tab loses focus
3. Accumulate time while unfocused and "catch up" when refocused
4. Use Web Workers for autonomous behavior (more complex)

**Files to Investigate:**
- [gameTimingStore.ts](../src/stores/gameTimingStore.ts) - Main game loop
- [useGuineaPigBehavior.ts](../src/composables/game/useGuineaPigBehavior.ts) - Autonomous behaviors

---

## âš™ï¸ **Phase 2.5 Systems**

**Note:** These systems were deferred during Phase 4 development and need to be implemented before Phase 5.

### System 10.1: Personality Trait Influences on Interactions
**Priority:** HIGH
**Status:** ðŸ“‹ Not Started
**Category:** Social System Enhancement

**Documentation:** [System 10.1](systems/phase2.5/system-10.1-personality-influences.md)

**Goal:** Personality traits affect how guinea pigs respond to player interactions

**Key Features:**
- Shy guinea pigs: lower acceptance rate for handling/play
- Bold guinea pigs: higher acceptance rate, more eager
- Calm guinea pigs: longer tolerance for interactions
- Energetic guinea pigs: prefer active interactions (play > petting)

---

### System 10.2.5: Fulfillment Limitation System
**Priority:** HIGH
**Status:** ðŸ“‹ Not Started
**Category:** Food & Wellness System

**Documentation:** [System 10.2.5](systems/phase2.5/system-10.2.5-fulfillment-limitation.md)

**Goal:** Limit food consumption per hunger cycle to prevent spam feeding

**Key Features:**
- 5 servings max per hunger cycle (excludes hay)
- Hay unlimited (always available)
- Prevents overfeeding exploits
- More realistic feeding patterns

**Includes:** Food Serving Guide UI component (see documentation)

---

### System 10.3: Wellness-Based Interaction Reactions
**Priority:** HIGH
**Status:** ðŸ“‹ Not Started
**Category:** Social System Enhancement

**Documentation:** [System 10.3](systems/phase2.5/system-10.3-wellness-reactions.md)

**Goal:** Guinea pig wellness affects interaction acceptance rates

**Key Features:**
- High wellness (>70): more accepting, lower rejection rate
- Low wellness (<30): more rejections, needs rest/care
- Creates gameplay loop: good care â†’ better interactions â†’ higher friendship

---

### Needs System Fixes ðŸŽ¯

#### Add Nails Need to Needs Display
**Priority:** HIGH
**Status:** ðŸ“‹ Not Started
**Category:** Bug Fix

**Issue:** Nails need is not visible in the needs section display, though it exists in the data model.

**Investigation:**
- Check if nails need is being filtered out in display components
- Verify needs controller includes nails in needs list
- Check NeedBar/NeedRow components

**Files to Check:**
- [NeedBar.vue](../src/components/game/ui/NeedBar.vue)
- [NeedRow.vue](../src/components/basic/NeedRow.vue)
- [needsController.ts](../src/stores/needsController.ts)

**Estimated Effort:** 30 minutes

---

#### Adjust Thirst Decay Rate
**Priority:** HIGH
**Status:** ðŸ“‹ Not Started
**Category:** Game Balance

**Issue:** Thirst is decreasing too fast - guinea pigs have trouble keeping up with water consumption.

**Solution:** Reduce thirst decay rate in needs configuration to match realistic guinea pig hydration patterns.

**Files to Modify:**
- [needs.ts](../src/constants/needs.ts) - Adjust `THIRST_DECAY_RATE`
- Test and balance with autonomous water-seeking behavior

**Estimated Effort:** 15 minutes (adjustment) + 30 minutes (testing)

---

### UI/UX Improvements ðŸŽ¨

#### Prevent Emoji Selection During Drag & Drop
**Priority:** MEDIUM
**Status:** ðŸ“‹ Not Started
**Category:** User Experience

**Issue:** Emojis are being accidentally selected/highlighted when trying to drag and drop items in the habitat.

**Solution:** Add CSS `user-select: none` to draggable emoji elements to prevent text selection during drag operations.

**Files to Modify:**
- Habitat item components (FoodBowl, HayRack, WaterBottle, ChewItem, etc.)
- GuineaPigSprite.vue

**Estimated Effort:** 15 minutes

---

#### Replace Bond Progress Bar with Slider Component
**Priority:** MEDIUM
**Status:** ðŸ“‹ Not Started
**Category:** UI Enhancement

**Issue:** Bond progress bars (both player friendship and companion bonds) don't visually update as bond levels increase.

**Solution:** Replace custom bond progress bar implementation with the SliderField component for consistent behavior.

**Files to Modify:**
- [SocializeSidebar.vue](../src/components/game/habitat/sidebars/SocializeSidebar.vue)
- May need to adapt SliderField for read-only display mode

**Investigation:**
- Check if issue is CSS (width transition) or data binding
- Consider if SliderField is appropriate or if custom bar needs fixing

**Estimated Effort:** 1-2 hours

---

#### Add Confirmation Button to Hand-Feed Dialog
**Priority:** MEDIUM
**Status:** ðŸ“‹ Not Started
**Category:** UX Improvement

**Issue:** Currently, clicking a food item in the hand-feed dialog immediately feeds it. This can lead to accidental feeding.

**Solution:** Add two-step process:
1. Click food item to select it (highlight selection)
2. Click "Feed" button to confirm and feed the guinea pig

**Files to Modify:**
- [FoodSelectionDialog.vue](../src/components/game/dialogs/FoodSelectionDialog.vue)
- Add selected state tracking
- Add footer with "Feed" button
- Update emit logic

**Estimated Effort:** 1 hour

---

### Habitat Item System ðŸ 

#### Enable Treats to be Dragged into Habitat
**Priority:** HIGH
**Status:** ðŸ“‹ Not Started
**Category:** Gameplay Feature

**Issue:** Treats cannot currently be dragged into the habitat, but they should be placeable items.

**Investigation Needed:**
- Check if treats have `category: 'habitat_item'` or are incorrectly categorized as `category: 'food'`
- Verify drag-and-drop handlers support treat items
- Confirm treat items have proper metadata for habitat placement

**Files to Investigate:**
- [suppliesStore.ts](../src/stores/suppliesStore.ts) - Item categorization
- [HabitatVisual.vue](../src/components/game/habitat/HabitatVisual.vue) - Drag handlers
- [inventoryStore.ts](../src/stores/inventoryStore.ts) - Item filtering

**Expected Behavior:** Treats should function like chew toys (placeable in habitat, consumable by guinea pigs)

---

#### Prevent Duplicate Items in Habitat
**Priority:** HIGH
**Status:** ðŸ“‹ Not Started
**Category:** Game Logic

**Issue:** Some items should not allow duplicates in the habitat (e.g., water bottles, specific types of beds).

**Implementation:**
- Add `allowDuplicates: boolean` metadata to item definitions
- Update habitat placement logic to check for existing instances
- Show user feedback when attempting to place duplicate restricted items

**Items That Should Not Allow Duplicates:**
- Water bottles (1 per habitat)
- Large beds (1-2 max depending on habitat size)
- Certain specialty items

**Files to Modify:**
- [supplies.ts](../src/types/supplies.ts) - Add `allowDuplicates` field to item metadata
- [habitatConditions.ts](../src/stores/habitatConditions.ts) - Add duplicate checking in `placeItemInHabitat()`
- Item catalog JSON files

**Estimated Effort:** 1-2 hours

---

## ðŸŽ¯ **Future Sprints - Planned Work**

These items are planned for future sprints and are not part of the current sprint scope.

### Social Interaction Enhancements ðŸ¤

#### Multi-Type Guinea Pig Interactions
**Priority:** LOW (Phase 5+)
**Status:** ðŸ“‹ Not Started (Future Enhancement)

Expand guinea pig social interactions beyond just "socialize":
- Play Interaction (social + play needs)
- Sniff/Investigate (social only)
- Groom/Allogrooming (social + hygiene)
- Huddle/Cuddle (social + comfort)

---

#### Pushable Toys System
**Priority:** LOW (Phase 5+)
**Status:** ðŸ“‹ Not Started (Future Enhancement)

Guinea pigs physically move balls and pushable toys across grid cells.

---

#### Special Treat Visual Effects
**Priority:** LOW (Phase 5+ - Polish)
**Status:** ðŸ“‹ Not Started (Future Enhancement)

**Goal:** Add fun visual effects when guinea pigs consume special treats.

**Special Effects:**
- ðŸŽƒ **Pumpkin Spice Treat:** Guinea pig glows orange for a few seconds
- ðŸï¸ **Island Treat:** Guinea pig transforms into a ðŸ  fish emoji temporarily
- ðŸŒˆ **Rainbow Treat:** Guinea pig glows with rainbow gradient transition

**Implementation:**
- Add CSS animations/filters for glow effects
- Temporary emoji replacement system
- Animation trigger on treat consumption
- Duration: 3-5 seconds per effect

**Files to Modify:**
- [GuineaPigSprite.vue](../src/components/game/habitat/GuineaPigSprite.vue) - Add effect animations
- [useGuineaPigBehavior.ts](../src/composables/game/useGuineaPigBehavior.ts) - Trigger effects on treat consumption
- CSS animations for glow/rainbow effects

**Estimated Effort:** 2-3 hours (fun polish feature)

---

### Adoption System Enhancement ðŸ¹

#### Pre-Bonded Pairs & Solo Guinea Pigs
**Priority:** HIGH (Future Sprint)
**Status:** ðŸ“‹ Not Started

**Documentation:** See sprint doc for full specification

Implement adoption constraints:
- Bonded pairs must be adopted together
- Solo-suitable guinea pigs can be adopted alone
- Enhanced observation system (3 clues including bonding status)

---

### Testing & Balance ðŸŽ®

#### Gameplay Testing Checklist
**Priority:** HIGH (Future Sprint)
**Status:** ðŸ“‹ Not Started

Comprehensive testing of all systems:
- Needs & wellness system
- Autonomous behaviors
- Food & consumption
- Habitat conditions
- Social bonding
- Item metadata & realism

---

#### Create Realism Guidelines
**Priority:** MEDIUM (Future Sprint)
**Status:** ðŸ“‹ Not Started

Document realistic guinea pig care guidelines for game balance:
- Feeding frequency & amounts
- Sleep patterns
- Social behavior
- Habitat cleanliness standards

---

## ðŸ“ **Notes**

### Completed This Sprint âœ…
- **Code Audit** - Comprehensive audit of 17 files from previous sprint
  - Created [CODE-AUDIT-2025-11-03.md](audits/CODE-AUDIT-2025-11-03.md)
  - Found and documented 1 medium + 3 minor issues
  - All systems verified working correctly

- **CSS Audit** - Comprehensive CSS standards audit of 9 components
  - Created [CSS-AUDIT-SPRINT-2025-11-02.md](audits/CSS-AUDIT-SPRINT-2025-11-02.md)
  - **Overall Score: 9.6/10** - Excellent quality
  - 100% BEM compliance, 100% logical properties, 100% CSS variables
  - Applied panel utility improvements to SocializeSidebar and HabitatDebug

- **Bug Fixes**
  - âœ… Fixed CELL_SIZE magic number in GuineaPigSprite (now uses prop from parent)
  - âœ… Memory leak fixes from previous sprint verified

### Active Items ðŸš§

**High Priority Bugs & Fixes:**
- ðŸ”¥ Window focus bug (autonomous behavior stops when window loses focus)
- ðŸ”¥ Nails need not showing in needs display
- ðŸ”¥ Thirst decay rate too fast
- ðŸ”¥ Treats cannot be dragged into habitat
- ðŸ”¥ Prevent duplicate habitat items

**Medium Priority UX Improvements:**
- Bond progress bars not updating visually
- Hand-feed dialog needs confirmation button
- Emoji selection during drag & drop

**Phase 2.5 Systems:**
- System 10.2.3: Personality Influences on Food Choice
- System 10.2.5: Fulfillment Limitation System
- System 10.3: Wellness-Based Interaction Reactions

**Future Enhancements:**
- Special treat visual effects (polish feature)
- Multi-type guinea pig interactions
- Pushable toys system
- Pre-bonded pairs adoption system

### Next Steps
1. **Immediate:** Fix high-priority bugs (nails display, thirst rate, treats drag)
2. **This Sprint:** Window focus bug + Phase 2.5 systems
3. **This Sprint:** Medium-priority UX improvements
4. **Future:** Polish features and adoption system enhancements
